{"version":3,"sources":["data/covid_19_data.csv","views/View1/index.js","charts/util.js","views/View2/index.js","charts/RaceLine/index.js","views/View3/index.js","charts/WorldBubbleChart/index.js","views/View7/index.js","Dashboard.js","index.js"],"names":["module","exports","View1","handleDoubleClick","record","rowIndex","props","onCountryChanged","country","data","this","date","total","today","Date","closest","reduce","a","b","latest_data","filter","row","helper","sums","r","o","key","confirmed","parseInt","recovered","deaths","Object","assign","push","map","d","sort","console","log","id","className","columns","title","dataIndex","dataSource","onRow","onDoubleClick","event","Component","findCountryData","groups","grouped","result","forEach","g","i","length","countrydata","error","latestDate","latestCountry","selectedCountry","latest","province","active","summarizeCountry","View2","render","text","JSON","parse","stringify","lDate","summary","CoronaLine","drawsvg","d3","refs","anchorLine","selectAll","remove","width","height","svg","attr","parseDate","timeParse","x","range","y","color","sumcountry","linedata","rawcountry","keys","index","item","acc","obj","xAxis","tickFormat","yAxis","line","price","curve","companies","cols","category","domain","c","values","v","append","call","enter","on","style","each","includes","name","totalLength","getTotalLength","transition","duration","ease","legend","mouseG","lines","document","getElementsByClassName","mousePerLine","mouse","beginning","end","target","Math","floor","pos","getPointAtLength","select","invert","toFixed","ref","View3","overflowX","overflowY","CoronaBubble","state","datatype","anchor","projection","center","scale","path","tip","d3Tip","direction","html","properties","linear_color","topojson","world","objects","units","features","join","number","offsetX","offsetY","node","show","hide","legendLinear","legendColor","shapeWidth","labelFormat","cells","orient","sqrt","drawmap","View7","Sider","Layout","Content","Dashboard","coronadata","handleCountryChanged","setState","Promise","all","rawdata","then","alert","catch","err","backgroundColor","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.fa698e73.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/covid_19_data.2c6807e4.csv\";","import React, { Component } from 'react';\r\n//import { Avatar } from 'antd';\nimport './view1.css';\r\nimport { Table } from 'antd';\n//import * as d3 from 'd3';\n\n\r\nexport default class View1 extends Component {\r\n    handleDoubleClick=(record, rowIndex)=>{\n//        console.log(record.country);\n        this.props.onCountryChanged(record.country);\n    }\n    render() {\r\n        const columns = [\n          {\n            title: 'Country',\n            dataIndex: 'country',\n            key: 'country',\n//            render: text => <a>{text}</a>,\n          },\n          {\n            title: 'Deaths',\n            dataIndex: 'deaths',\n            key: 'deaths',\n          },\n//          {\n//            title: 'Confirmed',\n//            dataIndex: 'confirmed',\n//            key: 'confirmed',\n//          },\n//         {\n//            title: 'Recovered',\n//            dataIndex: 'recovered',\n//            key: 'recovered',\n//          },\n        ];\n\n\n        const {data} = this.props;\n        let date = null,total = 0;\n\n\n        if(data!=null)\n        {\n            const today = new Date();\n            const closest = data.reduce((a, b) => a.Date - today < b.Date - today ? a : b);\n            date= closest.date;\n            const latest_data = data.filter((row)=>{return(row.date===date);});\n\n            var  helper = {};\n            var sum_by_country = latest_data.reduce(function(r, o) {\n              var key = o.country;\n\n              if(!helper[key]) {\n                helper[key] = Object.assign({}, o); // create a copy of o\n                r.push(helper[key]);\n              } else {\n                helper[key].confirmed = parseInt(helper[key].confirmed) + parseInt(o.confirmed);\n                helper[key].recovered = parseInt(helper[key].recovered) + parseInt(o.recovered);\n                helper[key].deaths = parseInt(helper[key].deaths) + parseInt(o.deaths);\n              }\n\n              return r;\n            }, []);\n\n            var sums = sum_by_country.map(function(d) {\n              return {\n                country: d.country,\n                deaths: d.deaths,\n                confirmed: d.confirmed,\n                recovered: d.recovered,\n              }\n            });\n            sums.sort(function(a,b) {\n                return b.confirmed-a.confirmed;\n            });\n            total= sums.reduce((a, b) => +a + +b.confirmed, 0);;\n            console.log(total);\n        }//if(data!=null)\n\n\n\n        return (\r\n            <div id='view1' className='pane'>\r\n                <div className='confirmed'>Confirmed:</div>\n                <div><span className='total'>{total}</span> until <span className='date'>{date}</span></div>\n                <Table columns={columns} dataSource={sums}\n                      onRow={(record, rowIndex) => {\n                      return {\n                          onDoubleClick: event => {this.handleDoubleClick(record, rowIndex)} // double click row\n                        };\n                      }}\n                />\n            </div>\r\n        )\r\n    }//render\n}\r\n\n\n","function groupBy(list, keyGetter) {\n    const map = new Map();\n    list.forEach((item) => {\n         const key = keyGetter(item);\n         const collection = map.get(key);\n         if (!collection) {\n             map.set(key, [item]);\n         } else {\n             collection.push(item);\n         }\n    });\n    return map;\n}\n\n\nfunction findCountryData(data,country,date){\n//    country = countryname(country);\n    const groups = ['country', 'date'];\n    var grouped = {};\n    var result = {\"confirmed\":0,\"recovered\":0,\"deaths\":0,\"active\":0}\n\n    data.forEach(function (a) {\n        groups.reduce(function (o, g, i) {  // take existing object,\n            o[a[g]] = o[a[g]] || (i + 1 === groups.length ? [] : {}); // or generate new obj, or\n            return o[a[g]];                                           // at last, then an array\n        }, grouped).push(a);\n    });\n\n\n    try{\n        var countrydata=grouped[country][date];\n        var confirmed=0,deaths=0,recovered=0;\n        if(!countrydata || countrydata.length === 0) {return result;}\n        countrydata.forEach(record=>{\n            confirmed = confirmed+parseInt(record['confirmed']);\n            deaths = deaths+parseInt(record['deaths']);\n            recovered = recovered+parseInt(record['recovered']);\n        });\n//        console.log(confirmed,deaths,recovered);\n    }catch(error){\n//        console.log(\"error \", country, date,error);\n        return result;\n    };\n\n//    if(datatype==='deaths'){\n////        if(country==='China'){\n////            console.log('deaths ', country, date,datatype,data)\n////\n////        }\n//        return deaths;\n//    }else if(datatype==='recovered'){\n////        console.log('recovered ', recovered)\n//        return recovered;\n//    }else if(datatype==='hospitalized'){\n//        var hospitalized =confirmed-deaths-recovered;\n////        console.log('hospitalized ', hospitalized)\n//        return hospitalized;\n//    }else{\n////        console.error(\"no matched datadype\");\n//        return 0;\n//    }\n\n    result = {\"confirmed\":confirmed,\"recovered\":recovered,\"deaths\":deaths,\"active\":(confirmed-recovered-deaths)};\n\n    return result;\n\n\n}\n\nfunction latestDate(data){\n    const today = new Date();\n    const closest = data.reduce((a, b) => a.Date - today < b.Date - today ? a : b);\n\n    return closest.date;\n}\n\nfunction countryname(name){\n    if(name==='Mainland China')\n    {\n        return \"China\";\n    }\n    else if(name==='US')\n    {\n        return \"United States\";\n    }\n    else{\n        return name;\n    }\n\n}\n\n\nfunction latestCountry(data,selectedCountry){\n//    selectedCountry = countryname(selectedCountry);\n    const today = new Date();\n    const closest = data.reduce((a, b) => a.Date - today < b.Date - today ? a : b);\n    const date= closest.date;\n    const latest_data = data.filter((row)=>{return(row.date===date && row.country=== selectedCountry);});\n    console.log(date,selectedCountry,latest_data);\n\n    var latest = latest_data.map(function(d) {\n      return {\n        province: d.province,\n        deaths: d.deaths,\n        confirmed: d.confirmed,\n        recovered: d.recovered,\n        active:parseInt(d.confirmed) - parseInt(d.deaths) - parseInt(d.recovered),\n      }\n    });\n\n    latest.sort(function(a,b) {\n        return b.confirmed-a.confirmed;\n    });\n    console.log(\"latest\",latest);\n    return latest;\n\n}\n\nfunction summarizeCountry(data,selectedCountry){\n//    selectedCountry = countryname(selectedCountry);\n    var latest = latestCountry(data,selectedCountry);\n    var confirmed = latest.reduce((a, b) => +a + +b.confirmed, 0);\n    var recovered = latest.reduce((a, b) => +a + +b.recovered, 0);\n    var deaths = latest.reduce((a, b) => +a + +b.deaths, 0);\n    var active = confirmed-recovered-deaths;\n    var summary={\"confirmed\":confirmed,\"recovered\":recovered,\"deaths\":deaths,\"active\":active};\n//    console.log(\"summary\",selectedCountry,summary);\n    return summary;\n}\n\n\n\nfunction findMax(data, datatype){\n    var grouped = {};\n    const groups = ['country', 'date'];\n\n\n    data.forEach(function (a) {\n        groups.reduce(function (o, g, i) {  // take existing object,\n            o[a[g]] = o[a[g]] || (i + 1 === groups.length ? [] : {}); // or generate new obj, or\n            return o[a[g]];                                           // at last, then an array\n        }, grouped).push(a);\n    });\n\n//    console.log(\"findMax\",grouped);\n}\n\n\nexport {groupBy,findCountryData,findMax,summarizeCountry,latestCountry,latestDate};\n","import React, { Component } from 'react';\r\n//import { Avatar } from 'antd';\r\nimport './view2.css';\r\nimport { Table } from 'antd';\r\n//import * as d3 from 'd3';\r\nimport {summarizeCountry,latestCountry} from \"../../charts/util.js\"\r\n\r\n\r\nexport default class View2 extends Component {\r\n\r\n    render() {\r\n\r\n        const columns = [\r\n          {\r\n            title: 'State/Pro',\r\n            dataIndex: 'province',\r\n            key: 'province',\r\n            render: text => <a>{text}</a>,\r\n          },\r\n          {\r\n            title: 'Deaths',\r\n            dataIndex: 'deaths',\r\n            key: 'deaths',\r\n          },\r\n          {\r\n            title: 'Confirmed',\r\n            dataIndex: 'confirmed',\r\n            key: 'confirmed',\r\n          },\r\n            {\r\n            title: 'Active',\r\n            dataIndex: 'active',\r\n            key: 'active',\r\n          },\r\n//         {\r\n//            title: 'Recovered',\r\n//            dataIndex: 'recovered',\r\n//            key: 'recovered',\r\n//          },\r\n        ];\r\n\r\n        var data = JSON.parse(JSON.stringify(this.props.data));\r\n        const {selectedCountry,lDate} = this.props;\r\n\r\n\r\n        if(data!=null)\r\n        {\r\n            var latest = latestCountry(data,selectedCountry);\r\n            var summary = summarizeCountry(data,selectedCountry);\r\n        }\n\r\n        return (\r\n            <div id='view2' className='pane'>\r\n                <div className='countrytitle'>{this.props.selectedCountry} Detail:</div>\r\n                <div><span className='total'>{summary.confirmed}</span> until <span className='date'>{lDate}</span></div>\r\n                <Table columns={columns} dataSource={latest} />\r\n            </div>\r\n        )\r\n    }//render\r\n}\r\n\r\n\r\n","import React , { Component }from 'react';\n//import { BarStack } from '@vx/shape';\n//import { Group } from '@vx/group';\n//import { Grid } from '@vx/grid';\n//import { AxisBottom } from '@vx/axis';\n//import { cityTemperature } from '@vx/mock-data';\n//import { scaleBand, scaleLinear, scaleOrdinal } from '@vx/scale';\nimport { timeParse } from 'd3-time-format';\n//import { withTooltip, Tooltip } from '@vx/tooltip';\n//import { LegendOrdinal } from '@vx/legend';\n//import {groupBy} from '../util.js'\nimport * as d3 from 'd3';\n\n\nclass CoronaLine extends Component{\n   componentDidMount() {\n       console.log(\"CoronaLine:componentDidMount()\")\n       this.drawsvg();\n\n\n    }\n\n    componentDidUpdate() {\n        console.log(\"CoronaLine:componentDidUpdate()\");\n        d3.select(this.refs.anchorLine).selectAll('g').remove();\n        this.drawsvg();\n    }\n\n    drawsvg(){\n        console.log(\"CoronaLine:drawsvg()\")\n        var { width, height,data } = this.props;\n        var svg = d3.select(this.refs.anchorLine)\n                    .attr(\"transform\", \"translate(100,15)\");\n\n        var margin = {top: 20, right: 50, bottom: 30, left: 100};\n        width = width - margin.left - margin.right;\n        height = height - margin.top - margin.bottom;\n\n        const parseDate = timeParse('%m/%d/%Y');//01/22/2020\n\n        var x = d3.scaleTime().range([0, width]);\n\n        var y =  d3.scaleLinear().range([height, 0]);\n\n        const color=['#ff8424','#efb01d','#a44afe'];\n\n        // sum the data for each country and date\n        const groups=[\"country\",\"date\"];\n        const columns=['confirmed','recovered','deaths'];\n        var grouped = {};\n        var sumcountry = {};\n        var linedata = JSON.parse(JSON.stringify(data));\n\n        linedata.forEach(function (a) {\n            groups.reduce(function (o, g, i) {  // take existing object,\n                o[a[g]] = o[a[g]] || (i + 1 === groups.length ? [] : {}); // or generate new obj, or\n                return o[a[g]];                                           // at last, then an array\n            }, grouped).push(a);\n        });\n\n        var rawcountry = grouped[this.props.selectedCountry];\n\n        Object.keys(rawcountry).forEach(function(key,index) {\n            var item ={};\n            columns.forEach((i)=>{\n                item[i]=rawcountry[key].reduce(function(acc,obj){return acc+parseInt(obj[i])},0);\n            });\n            sumcountry[key]= item;\n        });\n        // sum the data for each country and date\n\n        var xAxis = d3.axisBottom(x).tickFormat(d3.timeFormat(\"%Y-%m-%d\"));\n        var yAxis = d3.axisLeft(y);\n\n        var line = d3.line()\n            .x(function(d) { return x(d.date); })\n            .y(function(d) { return y(d.price); })\n            .curve(d3.curveCardinal);\n\n          linedata.forEach(function(d) {\n            d.date = parseDate(d.date);\n          });\n\n          var companies = [];\n          const cols= ['active','recovered','deaths'];\n          cols.forEach((category,index)=>{\n              let obj=[];\n              for (var date in sumcountry){\n                  if(category === 'active'){\n                      var con = parseInt(sumcountry[date][\"confirmed\"]);\n                      var rec = parseInt(sumcountry[date][\"recovered\"]);\n                      var det = parseInt(sumcountry[date][\"deaths\"]);\n                      var active = (con-rec-det);\n//                      console.log(sumcountry[date]);\n                      obj.push({\"date\":parseDate(date),\"price\":active});\n                  }else{\n                    obj.push({\"date\":parseDate(date),\"price\":parseInt(sumcountry[date][category])});\n                  }\n              }\n              companies.push({\"name\":category,\"values\":obj});\n          });\n//          console.log(companies);\n\n          x.domain(d3.extent(linedata, function(d) { return d.date; }));\n          y.domain([\n            d3.min(companies, function(c) { return d3.min(c.values, function(v) { return v.price; }); }),\n            d3.max(companies, function(c) { return d3.max(c.values, function(v) { return v.price; }); })\n          ]);\n\n        svg.append(\"g\")\n            .attr(\"class\", \"x axis\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis);\n\n        svg.append(\"g\")\n            .attr(\"class\", \"y axis\")\n            .attr(\"transform\", \"translate(0)\")\n            .call(yAxis);\n\n\n        svg.append(\"line\")\n            .attr(\n            {\n                \"class\":\"horizontalGrid\",\n                \"x1\" : 0,\n                \"x2\" : width,\n                \"y1\" : y(0),\n                \"y2\" : y(0),\n                \"shape-rendering\" : \"crispEdges\",\n                \"stroke\" : \"black\",\n                \"stroke-width\" : \"1px\",\n                \"stroke-dasharray\": (\"3, 3\")\n            });\n\n\n        svg.selectAll(\".raceline\")\n            .data(companies)\n            .enter().append(\"g\")\n            .attr(\"class\", \"raceline\")\n            .on(\"click\",()=>{console.log(\"clicked\");});\n\n\n\n        var path = svg.selectAll(\".raceline\").append(\"path\")\n            .attr(\"class\", \"line\")\n            .attr(\"d\", function(d,index) {\n              return line(d.values); })\n            .style(\"stroke\", function(d,i) {\n              return color[i];\n            });\n\n        path.each(function(d,i) {\n            if(columns.includes(d.name)){\n                var totalLength = this.getTotalLength();\n                d3.select(this)\n                .attr(\"stroke-dasharray\", totalLength + \" \" + totalLength )\n                .attr(\"transform\", \"translate(0)\")\n                .on('click',()=>{\n                    d3.select(this).attr(\"stroke-dashoffset\", totalLength)\n                      .transition()\n                      .duration(2000)\n                      .ease(d3.easeLinear)\n                      .attr(\"stroke-dashoffset\", 0);\n                });\n\n            }\n        });\n\n          var legend = svg.selectAll('g .legend')\n              .data(cols)\n              .enter()\n            .append('g')\n              .attr('class', 'legend');\n\n          legend.append('rect')\n              .attr('x', 60)\n              .attr('y', function(d, i){ return i * 30 +30 ;})\n              .attr('width', 20)\n              .attr('height', 20)\n              .style('fill', function(d,i) {\n                return color[i];\n              });\n\n          legend.append('text')\n              .attr('x', 90)\n              .attr('y', function(d, i){ return (i * 30) + 45;})\n              .text(function(d){ return d; });\n\n\n    // append a g for all the mouse over nonsense\n    var mouseG = svg.append(\"g\")\n      .attr(\"class\", \"mouse-over-effects\");\n\n    // this is the vertical line\n    mouseG.append(\"path\")\n      .attr(\"class\", \"mouse-line\")\n      .style(\"stroke\", \"black\")\n      .style(\"stroke-width\", \"1px\")\n      .style(\"opacity\", \"0\");\n\n    // keep a reference to all our lines\n    var lines = document.getElementsByClassName('line');\n\n    // here's a g for each circle and text on the line\n    var mousePerLine = mouseG.selectAll('.mouse-per-line')\n      .data(d3.range(lines.length))\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"mouse-per-line\");\n\n    // the circle\n    mousePerLine.append(\"circle\")\n      .attr(\"r\", 7)\n      .style(\"stroke\", function(d) {\n        return 'black';\n      })\n      .style(\"fill\", \"none\")\n      .style(\"stroke-width\", \"1px\")\n      .style(\"opacity\", \"0\");\n\n    // the text\n    mousePerLine.append(\"text\")\n      .attr(\"transform\", \"translate(10,3)\");\n\n    // rect to capture mouse movements\n    mouseG.append('svg:rect')\n      .attr('width', width)\n      .attr('height', height)\n      .attr('fill', 'none')\n      .attr('pointer-events', 'all')\n      .on('mouseout', function() { // on mouse out hide line, circles and text\n        d3.select(\".mouse-line\")\n          .style(\"opacity\", \"0\");\n        d3.selectAll(\".mouse-per-line circle\")\n          .style(\"opacity\", \"0\");\n        d3.selectAll(\".mouse-per-line text\")\n          .style(\"opacity\", \"0\");\n      })\n      .on('mouseover', function() { // on mouse in show line, circles and text\n        d3.select(\".mouse-line\")\n          .style(\"opacity\", \"1\");\n        d3.selectAll(\".mouse-per-line circle\")\n          .style(\"opacity\", \"1\");\n        d3.selectAll(\".mouse-per-line text\")\n          .style(\"opacity\", \"1\");\n      })\n      .on('mousemove', function() { // mouse moving over canvas\n        var mouse = d3.mouse(this);\n\n        // move the vertical line\n        d3.select(\".mouse-line\")\n          .attr(\"d\", function() {\n            var d = \"M\" + mouse[0] + \",\" + height;\n            d += \" \" + mouse[0] + \",\" + 0;\n            return d;\n          });\n\n        // position the circle and text\n        d3.selectAll(\".mouse-per-line\")\n          .attr(\"transform\", function(d, i) {\n//            var xDate = x.invert(mouse[0]);\n\n            // since we are use curve fitting we can't relay on finding the points like I had done in my last answer\n            // this conducts a search using some SVG path functions\n            // to find the correct position on the line\n            // from http://bl.ocks.org/duopixel/3824661\n            var beginning = 0,\n                end = lines[i].getTotalLength(),\n                target = null;\n\n            while (true){\n              target = Math.floor((beginning + end) / 2);\n              var pos = lines[i].getPointAtLength(target);\n              if ((target === end || target === beginning) && pos.x !== mouse[0]) {\n                  break;\n              }\n              if (pos.x > mouse[0])      end = target;\n              else if (pos.x < mouse[0]) beginning = target;\n              else break; //position found\n            }\n\n            // update the text with y value\n            d3.select(this).select('text')\n              .text(y.invert(pos.y).toFixed(0));\n\n            // return position\n            return \"translate(\" + mouse[0] + \",\" + pos.y +\")\";\n          });\n      });\n\n\n    }\n\n    render(){\n        console.log(\"CoronaLine:render()\");\n\n        const {data} = this.props;\n\n        if(!data){\n            return null;\n        }\n        return <g ref=\"anchorLine\" />;\n    }\n}\n\nexport default CoronaLine;\n\n\n","import React, { Component } from 'react';\r\n//import MapChart from '../../charts/MapChart';\nimport CoronaLine from '../../charts/RaceLine';\n\r\nimport './view3.css';\n\r\nexport default class View3 extends Component {\n    render() {\r\n        const {data,selectedCountry} = this.props;\n        console.log(\"view3\",this.props.selectedCountry);\n        return (\r\n            <div id='view3' className='pane'>\r\n                <div style={{ overflowX: 'scroll',overflowY:'hidden' }}>\n                        <svg id=\"linesvg\" width={900} height={300} selectedCountry={selectedCountry}>\n                            <CoronaLine width={900} height={300} data={data} selectedCountry={selectedCountry}/>\n                        </svg>\n                </div>\n            </div>\r\n        )\r\n    }\r\n}\n","import React, {Component} from 'react';\n// import queue from 'queue';\n// import topojson from 'topojson';\n// import all of topojson?????\nimport * as topojson from 'topojson';\nimport * as d3 from 'd3';\nimport {findCountryData,summarizeCountry,latestDate} from '../util.js';\n//import {createHistorySlider} from './createHistorySlider.js';\nimport world from '../../data/world-topo.json';\n//import world from '../../data/countries_geo.json';\n//import { timeParse, timeFormat } from 'd3-time-format';\nimport { legendColor } from 'd3-svg-legend';\nimport d3Tip from \"d3-tip\";\nimport './style.css';\n\n\nclass CoronaBubble extends Component {\n//    state = {\n//        date:'03/24/2020',\n//        datatype:'deaths',\n//    };\n\n    constructor(props) {\n      super(props);\n      var lDate = latestDate(this.props.data);\n      this.state = { date: lDate, datatype:'deaths' };\n    }\n\n    drawmap()\n    {\n        console.log(\"CoronaBubble:drawmap\");\n        const svg = d3.select(this.refs.anchor),{data } = this.props;\n        const projection = d3.geoMercator().center([30, 40 ])\n            .scale(120);\n        const path = d3.geoPath(projection);\n//        const date = this.state.date;\n        const groups = ['country', 'date'];\n        var grouped = {};\n//        const format = timeFormat('%m/%d/%Y');\n//        var timer = null;\n//        var isPlaying = false;\n//\n//        var slider = createHistorySlider(\n//            '#dateslider',width-200,80,'01/22/2020',this.state.date,(date)=>{\n//                const d = format(date);\n//\n//                this.setState({\n//                    date:d,\n//                })\n//        });\n\n        var tip = d3Tip()\n          .attr('class', 'd3-tip')\n          .direction('s')\n          .html(function(d) {\n            var country = d.properties['name'];\n            var summary =  summarizeCountry(data,country);\n\n            var tipstring = \"<strong>\"+country+\"</strong><br>\"+\"<strong>Confirmed:</strong><span style='color:red'>\" + summary.confirmed + \"</span><br>\"+\"<strong>deaths:</strong><span style='color:red'>\" + summary.deaths + \"</span><br>\"+\"<strong>active:</strong><span style='color:red'>\" + summary.active + \"</span><br>\"+\"<strong>recovered:</strong><span style='color:red'>\" + summary.recovered + \"</span><br>\";\n\n            return tipstring;\n          })\n\n\n//        d3.select(\"#play\")\n//              .attr(\"title\",\"Play animation\")\n//              .on(\"click\",function(){\n//                if ( !isPlaying ){\n//                  d3.select(this).classed(\"pause\",true).attr(\"title\",\"Pause animation\");\n//                  timer = setInterval(step, 100);\n////                  isPlaying = true;\n//                } else {\n//                  clearInterval(timer);\n//                  d3.select(this).classed(\"pause\",false).attr(\"title\",\"Play animation\");\n////                  isPlaying = false;\n//                }\n//              });\n\n        data.forEach(function (a) {\n            groups.reduce(function (o, g, i) {  // take existing object,\n                o[a[g]] = o[a[g]] || (i + 1 === groups.length ? [] : {}); // or generate new obj, or\n                return o[a[g]];                                           // at last, then an array\n            }, grouped).push(a);\n        });\n\n        d3.selectAll(\"#worldgroup,.legendLinear\").remove();\n        const g = svg.append( \"g\" ).attr(\"id\",\"worldgroup\");\n\n\n        var linear_color = d3.scaleThreshold()\n            .domain([500,1000,2000,5000,10000,20000,50000,100000,200000])\n            .range(d3.schemeBlues[9]);\n\n\n//        findMax(data, \"confirmed\");\n\n        g.append('circle')\n            .attr('id', 'tipfollowscursor')\n            .attr('r',15)\n            .style(\"opacity\", 0.0)\n            .attr('fill','red');\n        g.call(tip);\n        g.selectAll(\"path .worldpath\")\n          .data(topojson.feature(world, world.objects.units).features)\n          .call(tip)\n           .join(\"path\")\n            .attr(\"fill\", (d)=>{\n                    var country =d.properties['name'];\n////                    var summ = summarizeCountry(data,country);\n                    var number = findCountryData(data,country,this.state.date)[this.state.datatype];\n                    var color = linear_color(number);\n                    return color;\n                })\n            .attr(\"class\",\"worldpath\")\n            .attr(\"id\",d => d.properties['name'])\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-linejoin\", \"round\")\n            .attr(\"d\", path)\n//            .on('mouseover', tip.show)\n            .on('mouseover', function (d) {\n                var target = d3.select('#tipfollowscursor')\n                    .attr('cx', d3.event.offsetX)\n                    .attr('cy', d3.event.offsetY - 5) // 5 pixels above the cursor\n                    .node();\n                tip.show(d, target);\n            })\n            .on('mouseout', tip.hide);\n//            .append(\"title\")\n//              .text(d => d.properties['name']);\n\n\n// add zoom funtion for map\n//        var zoom = d3.zoom()\n//              .scaleExtent([1, 10])\n//              .on('zoom', function() {\n//                  d3.selectAll('#worldgroup,#circledgroup')\n//                   .attr('transform', d3.event.transform);\n//        });\n//\n//        svg.call(zoom);\n\n//        function step(){\n//            var currentdate = new Date(slider.value());\n//            var maxdate= new Date(slider.max());\n//            var mindate= new Date(slider.min());\n//\n//            if(currentdate < maxdate){\n//                currentdate.setDate(currentdate.getDate() + 1);\n//                const startdate = format(currentdate);\n//            }else{\n//                currentdate = mindate;\n//                clearInterval(timer);\n//                d3.select(\"#play\").classed(\"pause\",false).attr(\"title\",\"Play animation\");\n//            }\n//            slider.value(currentdate);\n//        }\n//\n//        d3.select('#datatype').on('change',()=>{\n//            var e = document.getElementById(\"datatype\")\n//            this.setState({datatype:e.options[e.selectedIndex].text});\n//        });\n\n        svg.append(\"g\")\n          .attr(\"class\", \"legendLinear\")\n          .attr(\"transform\", \"translate(30,270)\");\n\n        var legendLinear = legendColor()\n          .shapeWidth(30)\n//          .title(\"Corona cases by country\")\n          .labelFormat(d3.format(\".0f\"))\n          .cells(10)\n          .orient('vertical')\n          .scale(linear_color);\n\n        svg.select(\".legendLinear\")\n          .call(legendLinear);\n\n        //todo when change the selected country, try to show the tip of that country.\n//        console.log(\"CoronaBubble:drawmap:\",this.props.selectedCountry);\n//        var evt = new MouseEvent(\"mouseover\");\n//        document.getElementById(this.props.selectedCountry).dispatchEvent(evt);\n\n    }//drawmap\n\n\n    drawbubble(){\n        console.log(\"CoronaBubble:drawbubble\");\n        const svg = d3.select(this.refs.anchor),\n        { data } = this.props;\n//        const world = this.state.worldData;\n        const groups = ['country', 'date'];\n        const projection = d3.geoMercator();\n        var grouped = {};\n\n        data.forEach(function (a) {\n            groups.reduce(function (o, g, i) {  // take existing object,\n                o[a[g]] = o[a[g]] || (i + 1 === groups.length ? [] : {}); // or generate new obj, or\n                return o[a[g]];                                           // at last, then an array\n            }, grouped).push(a);\n        });\n\n        const color={\n                        \"deaths\":'#ff8424',\n                        \"active\":'#efb01d',\n                        \"recovered\":'#a44afe'\n                    };\n\n        svg.selectAll(\"#circledgroup\").remove();\n        const g = svg.append( \"g\" ).attr(\"id\",\"circledgroup\");\n        g.selectAll(\".worldcircle\")\n          .data(topojson.feature(world, world.objects.units).features)\n//          .data(world.features)\n          .enter()\n          .append(\"circle\")\n          .attr(\"r\",(d)=>{\n                var country = d.properties['name'];\n                return Math.sqrt(findCountryData(grouped,country,this.state.date)[this.state.datatype])/2;\n            })\n          .attr(\"fill\",color[this.state.datatype])\n          .style(\"opacity\", 0.2)\n          .attr(\"class\",\"worldcircle\")\n          .attr(\"transform\",function(d){\n            var p = projection(d3.geoCentroid(d)); //<-- centroid is the center of the path, projection maps it to pixel positions\n            return \"translate(\"+p+\")\";\n          });\n\n    }//drawbubble\n\n    componentDidMount() {\n        console.log(\"CoronaBubble:componentDidMount\")\n        this.drawmap();\n//        this.drawbubble();\n\n    }\n\n    componentDidUpdate() {\n        console.log(\"CoronaBubble:componentDidUpdate\");\n//        this.drawbubble();\n        this.drawmap();\n\n    }\n\n    render() {\n        console.log(\"CoronaBubble:render\");\n//        const { worldData }  = this.state;\n\n//        if(!world) {return null}\n\n\n        return <g ref=\"anchor\" />;\n    }\n}\n\nexport default CoronaBubble;\n","import React, { Component } from 'react';\n//import MapChart from '../../charts/MapChart';\nimport CoronaBubble from '../../charts/WorldBubbleChart';\n//import RaceBubble from '../../charts/RaceBubble';\n//import * as d3 from 'd3';\nimport './view7.css';\n\nexport default class View7 extends Component {\n\n    render() {\n        const {data,selectedCountry} = this.props;\n\n        return (\n            <div id='view7' className='pane'>\n                <div style={{ overflowX: 'scroll',overflowY:'hidden' }}>\n                        <svg width=\"900\" height=\"500\">\n                            <CoronaBubble  data={data} selectedCountry={selectedCountry}/>\n                        </svg>\n                </div>\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react';\r\n//import { Layout,Row,Col,Tabs } from 'antd';\r\nimport { Layout} from 'antd';\r\nimport View1 from './views/View1';\r\nimport View2 from './views/View2';\r\nimport View3 from './views/View3';\r\n//import View4 from './views/View4';\r\n//import View5 from './views/View5';\r\nimport {latestDate} from './charts/util.js';\r\nimport View7 from './views/View7';\r\n//import View8 from './views/View8';\r\nimport './dashboard.css';\r\nimport rawdata from './data/covid_19_data.csv';\r\n//import rawdata from 'covid.csv';\r\nimport * as d3 from 'd3';\r\n\r\nconst { Sider, Content} = Layout;\r\n//const {TabPane} = Tabs;\r\n\r\nexport default class Dashboard extends Component {\r\n\r\n    state = {\r\n        coronadata:null,\r\n        selectedCountry:'United States',\r\n    }\r\n\r\n    componentDidMount(){\r\n\r\n//        //todo update domain based on the max deaths number\r\n        Promise.all([\r\n            d3.csv(rawdata)\r\n        ]).then( ([coronadata]) => {\r\n            if(coronadata){\r\n                this.setState({coronadata});\r\n            }else{\r\n                alert(\"wrong\")\r\n            }\r\n        }).catch(err => alert(err))\r\n    }\r\n\r\n    handleCountryChanged=(country)=>{\r\n//        console.log(\"handleCountryChanged\",country);\r\n        this.setState({selectedCountry: country});\r\n    }\r\n\r\n    render() {\r\n        const {coronadata} = this.state;\r\n        if(!coronadata){return null;}\r\n        let lDate = latestDate(coronadata);\r\n        let selectedCountry = this.state.selectedCountry;\r\n\r\n        return (\r\n            <div>\r\n                <Layout style={{ height: 920 }}>\r\n                    <Layout>\r\n                        <Sider width={300} style={{backgroundColor:'#eee'}}>\r\n                            <Content style={{ height: 900 }}>\r\n                                <View1 data={coronadata} onCountryChanged={this.handleCountryChanged}/>\r\n                            </Content>\r\n                        </Sider>\r\n                        <Layout style={{ height: 900 }}>\r\n                            <Content style={{ height: 500 }}>\n                                <View7 data={coronadata} selectedCountry={this.state.selectedCountry}/>\r\n                            </Content>\r\n                            <Content style={{ height: 300 }}>\r\n                                <View3 data={coronadata} selectedCountry={this.state.selectedCountry}/>\r\n                            </Content>\r\n                        </Layout>\r\n\r\n                        <Sider width={400} style={{backgroundColor:'#eee'}}>\r\n                            <View2 data={coronadata} selectedCountry={selectedCountry} lDate={lDate}/>\r\n                        </Sider>\r\n                    </Layout>\r\n                </Layout>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n//                            <Tabs  type=\"card\">\r\n//\r\n//\r\n//                                <TabPane tab=\"World\" key=\"1\">\r\n//                                    <Content>\r\n//                                            <Row id=\"controlpanel\" >\r\n//                                                <Col span={3}>\r\n//                                                    <div id=\"play\"></div>\r\n//                                                    <div><select id=\"datatype\">\r\n//                                                      <option id='datadeaths' defaultValue value=\"deaths\">deaths</option>\r\n//                                                      <option value=\"active\">active</option>\r\n//                                                      <option value=\"recovered\">recovered</option>\r\n//                                                    </select></div>\r\n//                                                </Col>\r\n//                                                <Col span={21}><div id=\"dateslider\"></div></Col>\r\n//                                            </Row>\r\n//                                        <View7 data={coronadata}/>\r\n//                                    </Content>\r\n//                                </TabPane>\r\n//\r\n//                                <TabPane tab=\"US\" key=\"2\">\r\n//\r\n//                                </TabPane>\r\n//\r\n//                                <TabPane tab=\"China\" key=\"3\">\r\n//\r\n//                                </TabPane>\r\n//\r\n//                            </Tabs>\r\n\r\n\r\n\r\n//                                <TabPane tab=\"Bubble\" key=\"2\">\r\n//                                    <div id=\"yearslider\"></div>\r\n//                                    <div id=\"yearplay\"></div>\r\n//                                    <View6 data={coronadata}/>\r\n//                                </TabPane>\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'antd/dist/antd.css';\r\nimport Dashboard from './Dashboard';\r\n\r\nReactDOM.render(<Dashboard />, document.getElementById('root'));\r\n"],"sourceRoot":""}